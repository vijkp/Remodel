cscope 15 $HOME/Remodel               0000017857
	@Makefile

2 
	gCC
 = 
gcc


3 
CFLAGS
 = -
D
 
DEBUG


5 
objs
 = 
maö
.
o
 
misc
.ÿ
fûe
.ÿ
maödefs
.ÿ
md5hash
.o

6 
§cs
 = 
maö
.
c
 
misc
.¯misc.
h
 
fûe
.¯fûe.h 
maödefs
.¯maödefs.h 
md5hash
.c md5hash.h

8 
ªmodñ
: 
CFLAGS
 = -
D
 
DEBUG
 -
ggdb
 -
g3


9 
nd
: 
CFLAGS
 = -
D
 
NON_DEBUG
 -
ggdb
 -
g3


10 
d
: 
CFLAGS
 = -
D
 
DEBUG
 -
ggdb
 -
g3


12 
Æl
: 
nd


13 
d
: 
ªmodñ


14 
nd
: 
ªmodñ
-nd

15 
ªmodñ
: 
$
(
objs
)

16 
$
(
CC
Ë$(
CFLAGS
Ë$(
objs
Ë-
ls¶
 -
l¸y±o
 -
o
 
ªmodñ
.
√w


17 
mv
 -
f
 
ªmodñ
.
√w
Ñemodel

19 #n⁄-
debug
 
buûd


20 
ªmodñ
-
nd
: 
$
(
objs
)

21 
$
(
CC
Ë$(
CFLAGS
Ë$(
objs
Ë-
ls¶
 -
l¸y±o
 -
o
 
ªmodñ
.
√w


22 
mv
 -
f
 
ªmodñ
.
√w
Ñemodel

24 
˛ón
:

25 
rm
 -
fv
 
ªmodñ
 *.
o


27 #IndividuÆ 
obje˘
 
fûe
 
™d
 
dïídícõs


28 
maö
.
o
: maö.
c
 
misc
.
h


29 
$
(
CC
Ë$(
CFLAGS
Ë-
c
 
maö
.¯-
o
 main.o

30 
misc
.
o
: misc.
c
 misc.
h


31 
$
(
CC
Ë$(
CFLAGS
Ë-
c
 
misc
.¯-
o
 misc.o

32 
fûe
.
o
: fûe.
c
 
misc
.
h
 file.h

33 
$
(
CC
Ë$(
CFLAGS
Ë-
c
 
fûe
.¯-
o
 file.o

34 
maödefs
.
o
: maödefs.
c


35 
$
(
CC
Ë$(
CFLAGS
Ë-
c
 
maödefs
.¯-
o
 maindefs.o

36 
md5hash
.
o
: md5hash.
c


37 
$
(
CC
Ë$(
CFLAGS
Ë-
ls¶
 -
l¸y±o
 -
c
 
md5hash
.¯-
o
 md5hash.o

	@file.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

5 
	~"maödefs.h
"

6 
	~"fûe.h
"

7 
	~"misc.h
"

9 
èrgë_t
 *
èrgë_hód
;

10 
§cfûe_t
 *
§cfûe_hód
;

12 
îr‹_t
 
	$fûe_¥o˚ss_ªmodñfûe
() {

13 
FILE
 *
fh
;

14 
îr‹_t
 
ªt
 = 0;

16 i‡((
ªt
 = 
	`fûe_gë_ªmodñfûe
(&
fh
)Ë!
SUCCESS
) {

17 
	`c⁄_log
("error: 'remodelfile'Çot found\n");

18 
íd
;

20 i‡((
ªt
 = 
	`fûe_ªad_ªmodñfûe
(&
fh
)Ë!
SUCCESS
) {

21 
	`c⁄_log
("error: 'remodelfile'Ñead failed\n");

22 
íd
;

24 
íd
:

25 
	`f˛o£
(
fh
);

26  
ªt
;

27 
	}
}

29 
îr‹_t
 
	$fûe_gë_ªmodñfûe
(
FILE
 **
ªmodñ_fh
) {

30 
îr‹_t
 
ªt
 = 
RM_NOFILEENT
;

33 *
ªmodñ_fh
 = 
	`f›í
("Remodelfile", "r");

34 i‡(*
ªmodñ_fh
 !
NULL
) {

35 
	`c⁄_log
("'remodelfile' file found.\n");

36 
ªt
 = 
SUCCESS
;

37 
found
;

39 *
ªmodñ_fh
 = 
	`f›í
("remodelfile", "r");

40 i‡(*
ªmodñ_fh
 !
NULL
) {

41 
	`c⁄_log
("'remodelfile' file found.\n");

42 
ªt
 = 
SUCCESS
;

43 
found
;

45  
ªt
;

46 
found
:

47  
ªt
;

48 
	}
}

50 
îr‹_t
 
	$fûe_ªad_ªmodñfûe
(
FILE
 **
fh
) {

51 *
löe
 = 
NULL
;

52 
fsize
;

53 
size_t
 
Àn
=0;

54 
ssize_t
 
ªad
;

55 
îr‹_t
 
ªt
 = 0;

57 (
ªad
 = 
	`gëlöe
(&
löe
, &
Àn
, *
fh
)) != -1) {

58 
ªt
 = 
	`fûe_∑r£_löe
(
löe
);

59 i‡(
ªt
 !
SUCCESS
) {

63 i‡(
ªt
 !
SUCCESS
) {

64 
íd
;

66 
íd
:

67 
	`‰ì
(
löe
);

68  
ªt
;

69 
	}
}

71 
	$fûe_ªmove_exåa_ch¨s
(*
löe
) {

72 
cou¡
, 
Àn
, 
i
, 
j
;

73 *
buf„r
;

75 
Àn
 = 
	`°æí
(
löe
);

76 i‡(
Àn
 <= 0) {

79 
buf„r
 = (*)
	`mÆloc
((
Àn
 + 1)*());

80 
	`mem£t
(
buf„r
, '\0', 
Àn
+1);

81 
i
 = 0, 
j
 = 0; i < 
Àn
; i++) {

82 i‡((
löe
[
i
] != ' ') && (line[i] != '\t') && (line[i] != '\n')) {

83 i‡(
löe
[
i
] >= ' ') {

84 
buf„r
[
j
] = 
löe
[
i
];

85 
j
++;

89 
buf„r
[
j
+1] = '\0';

90 
	`mem£t
(
löe
, '\0', 
Àn
);

91 
Àn
 = 
	`°æí
(
buf„r
);

92 
	`°∫˝y
(
löe
, 
buf„r
, 
Àn
);

93 
	`FREE
(
buf„r
);

94 
	}
}

96 
boﬁ
 
	$fûe_is_°rög_em±y
(*
löe
) {

97 
tŸÆ
 = 0;

98 
i
, 
Àn
;

100 
Àn
 = 
	`°æí
(
löe
);

101 i‡(
Àn
 == 0) {

102  
TRUE
;

104 
i
=0; i < 
Àn
; i++) {

105 i‡((
löe
[
i
] == ' ') || (line[i] == '\t') || (line[i] == '\n')) {

106 
tŸÆ
++;

109 if(
tŸÆ
 =
Àn
) {

110  
TRUE
;

112  
FALSE
;

113 
	}
}

116 
îr‹_t
 
	$fûe_∑r£_löe
(*
löe
) {

117 
îr‹_t
 
ªt
 = 
SUCCESS
;

118 
èrgë_t
 *
node
;

119 
dïídícy_t
 *
dp_node
;

120 
èrgë_«me
[128];

121 *
dp_°rög
 = 
NULL
;

122 *
comm™d_°rög
 = 
NULL
;

123 
size_t
 
Àn
 = 0;

124 
ssˇnf_out
 = 0;

125 
boﬁ
 
èrgë_found
 = 
Ál£
;

126 
boﬁ
 
dp_°rög_found
 = 
Ál£
;

127 
boﬁ
 
comm™d_found
 = 
Ál£
;

128 *
posôi⁄1
 = 
NULL
;

129 *
posôi⁄2
 = 
NULL
;

131 
	`mem£t
(
èrgë_«me
, '\0', 128);

132 
Àn
 = 
	`°æí
(
löe
);

134 i‡(
	`fûe_is_°rög_em±y
(
löe
)) {

135 
îr‹
;

138 
dp_°rög
 = (*)
	`mÆloc
(
Àn
*());

139 
comm™d_°rög
 = (*)
	`mÆloc
(
Àn
*());

140 
	`mem£t
(
dp_°rög
, '\0', 
Àn
);

141 
	`mem£t
(
comm™d_°rög
, '\0', 
Àn
);

143 
posôi⁄1
 = 
	`°r°r
(
löe
, "<-:");

144 
posôi⁄2
 = 
	`°r°r
(
löe
, ":\"");

146 if((
posôi⁄1
 =
NULL
Ë&& (
posôi⁄2
 == NULL)) {

147 
ssˇnf_out
 = 
	`ssˇnf
(
löe
, "%[^'<']<-%[^':']:%*[^\"]\"%[^\"]\"",

148 
èrgë_«me
, 
dp_°rög
, 
comm™d_°rög
);

149 } if((
posôi⁄1
 !
NULL
Ë&& (
posôi⁄2
 == NULL)) {

150 
ssˇnf_out
 = 
	`ssˇnf
(
löe
, "%[^'<']<-:%*[^\"]\"%[^\"]\"",

151 
èrgë_«me
, 
comm™d_°rög
);

152 } if((
posôi⁄1
 =
NULL
Ë&& (
posôi⁄2
 != NULL)) {

153 
ssˇnf_out
 = 
	`ssˇnf
(
löe
, "%[^'<']<-%[^':']:\"%[^\"]\"",

154 
èrgë_«me
, 
dp_°rög
, 
comm™d_°rög
);

155 } if((
posôi⁄1
 !
NULL
Ë&& (
posôi⁄2
 != NULL)) {

156 
ssˇnf_out
 = 
	`ssˇnf
(
löe
, "%[^'<']<-:\"%[^\"]\"",

157 
èrgë_«me
, 
comm™d_°rög
);

160 
	`fûe_ªmove_exåa_ch¨s
(
èrgë_«me
);

161 i‡(!
	`fûe_is_°rög_em±y
(
èrgë_«me
)) {

162 
èrgë_found
 = 
åue
;

164 
	`fûe_ªmove_exåa_ch¨s
(
dp_°rög
);

165 i‡(!
	`fûe_is_°rög_em±y
(
dp_°rög
)) {

166 
dp_°rög_found
 = 
åue
;

168 i‡(!
	`fûe_is_°rög_em±y
(
comm™d_°rög
)) {

169 
comm™d_found
 = 
åue
;

171 i‡(!(
èrgë_found
 && (
dp_°rög_found
 || 
comm™d_found
))) {

172 
Àn
 = 
	`°æí
(
löe
);

173 i‡(
löe
[
Àn
-1] == '\n')Üine[len-1] = ' ';

174 
	`c⁄_log
("îr‹:Ö¨sög faûed f‹Åhêlöê\"%s\"\n", 
löe
);

175 
ªt
 = 
RM_PARSE_FAIL
;

176 
îr‹
;

180 
node
 = 
	`√w_èrgë_node
();

181 
	`°r˝y
(
node
->
«me
, 
èrgë_«me
);

182 
node
->
comm™d
 = 
comm™d_°rög
;

185 
node
->
√xt
 = 
èrgë_hód
->next;

186 
èrgë_hód
->
√xt
 = 
node
;

189 i‡(
dp_°rög_found
) {

190 *
dp_«me
;

191 
§cfûe_t
 *
§c_node
;

192 
dp_ty≥_t
 
dp_ty≥
;

193 
dp_«me
 = 
	`°πok
(
dp_°rög
, ",");

194 
dp_«me
 !
NULL
) {

195 
dp_node
 = 
	`√w_dp_node
();

196 
dp_ty≥
 = 
	`check_dp_ty≥
(
dp_«me
);

199 i‡((
dp_ty≥
 =
DP_SRC
Ë|| (dp_ty≥ =
DP_HEADER
)) {

200 
§c_node
 = 
	`√w_§c_node
();

201 
	`°r˝y
(
§c_node
->
«me
, 
dp_«me
);

202 
§c_node
->
√xt
 = 
§cfûe_hód
->next;

203 
§cfûe_hód
->
√xt
 = 
§c_node
;

204 
	`debug_log
("addög sr¯fûê%†tÿ§¯li°\n", 
§c_node
->
«me
);

206 
dp_node
->
ty≥
 = 
dp_ty≥
;

207 
	`°r˝y
(
dp_node
->
«me
, 
dp_«me
);

210 i‡(
node
->
dp_hód
 =
NULL
) {

211 
dp_node
->
√xt
 = 
NULL
;

212 
node
->
dp_hód
 = 
dp_node
;

214 
dp_node
->
√xt
 = 
node
->
dp_hód
;

215 
node
->
dp_hód
 = 
dp_node
;

217 
	`debug_log
("fûê%†addedÅÿdïÜi° o‡%s\n", 
dp_«me
, 
node
->
«me
);

218 
dp_«me
 = 
	`°πok
(
NULL
, ",");

228 
íd
;

230 
îr‹
:

231 
	`FREE
(
comm™d_°rög
);

232 
íd
:

233 
	`FREE
(
dp_°rög
);

234  
ªt
;

235 
	}
}

237 
îr‹_t
 
	$fûe_check_giví_èrgë
(*
èrgë
) {

239 
	}
}

	@file.h

1 #i‚de‡
FILE_H


2 
	#FILE_H


	)

3 
	~"maödefs.h
"

4 
	~"misc.h
"

6 
îr‹_t
 
fûe_¥o˚ss_ªmodñfûe
();

7 
îr‹_t
 
fûe_gë_ªmodñfûe
(
FILE
 **);

8 
îr‹_t
 
fûe_ªad_ªmodñfûe
(
FILE
 **);

9 
îr‹_t
 
fûe_∑r£_löe
(*
löe
);

10 
fûe_ªmove_exåa_ch¨s
(*
löe
);

11 
îr‹_t
 
	$fûe_check_giví_èrgë
(*
èrgë
) {

	@main.c

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

4 
	~<°rög.h
>

7 
	~"maödefs.h
"

8 
	~"misc.h
"

9 
	~"fûe.h
"

10 
	~"md5hash.h
"

13 
èrgë_t
 *
	gèrgë_hód
;

14 
§cfûe_t
 *
	g§cfûe_hód
;

16 
	$maö
(
¨gc
, **
¨gv
) {

17 
îr‹_t
 
ªsu…
;

18 
èrgë_«me
[128] = "DEFAULT";

21 i‡(
¨gc
 == 1) {

22 
	`c⁄_log
("usingÅhe defaultÅarget 'DEFAULT'\n");

23 } i‡(
¨gc
 == 2) {

24 
	`°r˝y
(
èrgë_«me
, 
¨gv
[1]);

25 
	`c⁄_log
("usögÅhêgivíÅ¨gë '%s'\n", 
èrgë_«me
);

27 
	`c⁄_log
("îr‹: invÆidÇumbî o‡¨gumít†(%d)\n", (
¨gc
 - 1));

28 
	`¥öt_ußge
();

29 
íd
;

33 
èrgë_hód
 = 
	`√w_èrgë_node
();

34 
§cfûe_hód
 = 
	`√w_§c_node
();

35 
ªsu…
 = 
	`fûe_¥o˚ss_ªmodñfûe
();

36 i‡(
ªsu…
 !
SUCCESS
) {

37 
íd
;

41 
ªsu…
 = 
	`fûe_check_giví_èrgë
();

50 
ªsu…
 = 
	`md5_ˇlcuœã_f‹_sour˚s
();

51 i‡(
ªsu…
 !
SUCCESS
) {

52 
íd
;

62 
èrgë_t
 *
ãmp
 = 
èrgë_hód
->
√xt
;

63 
dïídícy_t
 *
dp_ãmp
 = 
NULL
;

64 
ãmp
 !
NULL
) {

65 
	`c⁄_log
("èrgë: %-18†comm™d: %s\n", 
ãmp
->
«me
,

66 
ãmp
->
comm™d
);

67 
dp_ãmp
 = 
ãmp
->
dp_hód
;

68 
	`c⁄_log
("\tdependencies:\n");

69 
dp_ãmp
 !
NULL
) {

70 
	`c⁄_log
("\t\t%s\n", 
dp_ãmp
->
«me
);

71 
dp_ãmp
 = dp_ãmp->
√xt
;

73 
ãmp
 =Åemp->
√xt
;

77 
§cfûe_t
 *
ãmp2
 = 
§cfûe_hód
->
√xt
;

78 
	`c⁄_log
("List of source files:\n");

79 
ãmp2
 !
NULL
) {

80 
	`c⁄_log
("\tfûe: %-18†md5: %s\n", 
ãmp2
->
«me
,

81 
ãmp2
->
md5hash
);

82 
ãmp2
 =Åemp2->
√xt
;

85 
íd
:

87  
SUCCESS
;

88 
	}
}

	@maindefs.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

5 
	~"maödefs.h
"

7 
èrgë_t
 *
	$√w_èrgë_node
() {

8 
èrgë_t
 *
√w_node
;

9 
√w_node
 = (
èrgë_t
 *)
	`mÆloc
((target_t));

10 i‡(
√w_node
 =
NULL
) {

11  
√w_node
;

13 
	`mem£t
(
√w_node
->
«me
, '\0', 
MAX_FILENAME
);

14 
√w_node
->
dp_hód
 = 
NULL
;

15 
√w_node
->
comm™d
 = 
NULL
;

16 
√w_node
->
√xt
 = 
NULL
;

17  
√w_node
;

18 
	}
}

20 
	$‰ì_èrgë_node
() {

22 
	}
}

24 
dïídícy_t
 *
	$√w_dp_node
() {

25 
dïídícy_t
 *
√w_node
;

26 
√w_node
 = (
dïídícy_t
 *)
	`mÆloc
((dependency_t));

27 i‡(
√w_node
 =
NULL
) {

28  
√w_node
;

30 
	`mem£t
(
√w_node
->
«me
, '\0', 
MAX_FILENAME
);

31 
√w_node
->
poöãr
 = 
NULL
;

32 
√w_node
->
√xt
 = 
NULL
;

33 
√w_node
->
ty≥
 = 
DP_UNKNOWN
;

34  
√w_node
;

35 
	}
}

37 
§cfûe_t
 *
	$√w_§c_node
() {

38 
§cfûe_t
 *
√w_node
;

39 
√w_node
 = (
§cfûe_t
 *)
	`mÆloc
((srcfile_t));

40 i‡(
√w_node
 =
NULL
) {

41  
√w_node
;

43 
	`mem£t
(
√w_node
->
«me
, '\0', 
MAX_FILENAME
);

44 
	`mem£t
(
√w_node
->
md5hash
, '\0', 
MD5_HASHSIZE
);

45 
√w_node
->
√xt
 = 
NULL
;

46 
√w_node
->
is_md5_¥e£¡
 = 
Ál£
;

47 
√w_node
->
√ed_md5_ˇlc
 = 
Ál£
;

48  
√w_node
;

49 
	}
}

51 
dp_ty≥_t
 
	$check_dp_ty≥
(*
«me
) {

52 
dp_ty≥_t
 
ªsu…
 = 
DP_TARGET
;

53 *
exä
;

55 
exä
 = 
	`°r°r
(
«me
, ".");

56 i‡(
exä
 =
NULL
Ë 
ªsu…
;

57 i‡(
	`°rcmp
(
exä
, ".c"Ë=0Ë 
DP_SRC
;

58 i‡(
	`°rcmp
(
exä
, ".h"Ë=0Ë 
DP_HEADER
;

59 i‡(
	`°rcmp
(
exä
, ".˝p"Ë=0Ë 
DP_SRC
;

60  
ªsu…
;

61 
	}
}

	@maindefs.h

1 #i‚de‡
MAINDEFS_H


2 
	#MAINDEFS_H


	)

4 
	~<°dlib.h
>

5 
	~<°dio.h
>

7 
	~"misc.h
"

8 
	~"ty≥.h
"

10 
	gdïídícy_
;

11 
	gèrgë_
;

12 
	g§cfûe_
;

14 
	#MAX_FILENAME
 256

	)

15 
	#MD5_HASHSIZE
 32

	)

18 
	mDP_UNKNOWN
,

19 
	mDP_TARGET
,

20 
	mDP_SRC
,

21 
	mDP_HEADER


22 } 
	tdp_ty≥_t
;

24 
	s§cfûe_
 {

25 
	m«me
[
MAX_FILENAME
];

26 
	mmd5hash
[2*
MD5_HASHSIZE
+1];

27 
boﬁ
 
	mis_md5_¥e£¡
;

28 
boﬁ
 
	m√ed_md5_ˇlc
;

29 
§cfûe_
 *
	m√xt
;

31 } 
	t§cfûe_t
;

33 
	sdïídícy_
 {

34 
	m«me
[
MAX_FILENAME
];

35 *
	mpoöãr
;

36 
dp_ty≥_t
 
	mty≥
;

37 
dïídícy_
 *
	m√xt
;

38 } 
	tdïídícy_t
;

40 
	sèrgë_
 {

41 
	m«me
[
MAX_FILENAME
];

42 *
	mcomm™d
;

43 
dïídícy_
 *
	mdp_hód
;

44 
èrgë_
 *
	m√xt
;

45 } 
	tèrgë_t
;

47 
èrgë_t
 *
√w_èrgë_node
();

48 
dïídícy_t
 *
√w_dp_node
();

49 
§cfûe_t
 *
√w_§c_node
();

50 
dp_ty≥_t
 
check_dp_ty≥
(*
«me
);

	@md5hash.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

5 
	~"maödefs.h
"

6 
	~"misc.h
"

7 
	~"md5hash.h
"

10 
	~<›ís¶/md5.h
>

12 
§cfûe_t
 *
§cfûe_hód
;

14 
îr‹_t
 
	$md5_ˇlcuœã_f‹_sour˚s
() {

15 
îr‹_t
 
ªt
 = 
SUCCESS
;

16 
§cfûe_t
 *
node
;

17 
FILE
 *
fd
;

18 *
fbuf„r
;

19 
md5hash
[
MD5_DIGEST_LENGTH
];

20 
fsize
;

21 
md5°rög
[2*
MD5_DIGEST_LENGTH
+1];

24 
node
 = 
§cfûe_hód
->
√xt
;

25 
node
 !
NULL
) {

26 
fd
 = 
	`f›í
(
node
->
«me
, "rb");

27 i‡(
fd
 =
NULL
) {

28 
	`c⁄_log
("w¨nög: faûedÅÿ›í '%s'\n", 
node
->
«me
);

31 
	`f£ek
(
fd
, 0, 
SEEK_END
);

32 
fsize
 = 
	`·ñl
(
fd
);

33 
	`ªwöd
(
fd
);

34 
fbuf„r
 = (*)
	`mÆloc
((
fsize
 +

36 
	`‰ód
(
fbuf„r
, 1, 
fsize
, 
fd
);

39 
	`MD5
(
fbuf„r
, 
fsize
, 
md5hash
);

40 
	`md5_to_°rög
(
md5hash
, 
md5°rög
);

41 
	`°r˝y
(
node
->
md5hash
, 
md5°rög
);

42 
	`debug_log
("calculating md5 for %s size: %ld bytes md5: %s\n",

43 
node
->
«me
, 
fsize
, 
md5°rög
);

44 
	`f˛o£
(
fd
);

45 
	`FREE
(
fbuf„r
);

46 
node
 =Çode->
√xt
;

48 
íd
:

49  
ªt
;

50 
	}
}

52 
	$md5_to_°rög
(*
md
, *
ªsu…
) {

53 
i
;

54 
tmp
[2];

55 
i
=0; i < 
MD5_DIGEST_LENGTH
; i++) {

56 
	`•rötf
(
tmp
, "%02x",
md
[
i
]);

57 
ªsu…
[2*
i
] = 
tmp
[0];

58 
ªsu…
[2*
i
+1] = 
tmp
[1];

60 
ªsu…
[32] = '\0';

61 
	}
}

	@md5hash.h

1 #i‚de‡
MD5HASH_H


2 
	#MD5HASH_H


	)

4 
îr‹_t
 
md5_ˇlcuœã_f‹_sour˚s
();

5 
md5_to_°rög
(*
md
, *
°rög
);

	@misc.c

1 
	~<°dio.h
>

2 
	~<°d¨g.h
>

3 
	~<°rög.h
>

5 
	$debug_log_
(*
fûíame
, 
 
, c⁄° *
f‹m©
, ...) {

6 
va_li°
 
¨g
;

7 
ªsu…
;

8 
f‹m©_√w
[200];

10 
	`•rötf
(
f‹m©_√w
, "ªmodñ: %s(%d): %s", 
fûíame
, 
 
, 
f‹m©
);

11 
f‹m©
 = 
f‹m©_√w
;

12 
	`va_°¨t
(
¨g
, 
f‹m©
);

13 
ªsu…
 = 
	`v¥ötf
(
f‹m©
, 
¨g
);

14 
	`va_íd
(
¨g
);

15  
ªsu…
;

16 
	}
}

18 
	$c⁄_log
(c⁄° *
f‹m©
, ...) {

19 
va_li°
 
¨g
;

20 
ªsu…
;

21 
f‹m©_√w
[200];

23 
	`•rötf
(
f‹m©_√w
, "ªmodñ: %s", 
f‹m©
);

24 
f‹m©
 = 
f‹m©_√w
;

25 
	`va_°¨t
(
¨g
, 
f‹m©
);

26 
ªsu…
 = 
	`v¥ötf
(
f‹m©
, 
¨g
);

27 
	`va_íd
(
¨g
);

28  
ªsu…
;

29 
	}
}

31 
	$¥öt_ußge
() {

32 
	`c⁄_log
("usage:Ñemodel [<target_name>]\n");

33 
	`c⁄_log
(" whenÇo <target_name> is specified default\n");

34 
	`c⁄_log
("Åarget 'DEFAULT' is used.\n");

35 
	}
}

	@misc.h

1 #i‚de‡
MISC_H


2 
	#MISC_H


	)

4 
	#TRUE
 1

	)

5 
	#FALSE
 0

	)

6 
	#åue
 
TRUE


	)

7 
	#Ál£
 
FALSE


	)

10 
	mSUCCESS
,

11 
	mRM_NOFILEENT
,

12 
	mRM_FAIL
,

13 
	mRM_PARSE_FAIL


14 } 
	tîr‹_t
;

16 
debug_log_
(*
fûíame
, 
 
, c⁄° *
f‹m©
, ...);

17 
c⁄_log
(c⁄° * 
fmt
, ...);

18 
¥öt_ußge
();

20 #ifde‡
DEBUG


21 
	#debug_log
(...Ë
	`debug_log_
(
__FILE__
, 
__LINE__
, 
__VA_ARGS__
)

	)

23 
	#debug_log
(...)

	)

26 
	#FREE
(
x
) { \

27 i‡(
x
 !
NULL
Ë
	`‰ì
(x);\

28 }

	)

	@tests/Makefile

1 
	gÆl
: 
¢≠


3 
¢≠
: 
obj
/
maö
.
o
 obj/
drivîs
.ÿobj/
fûesy°em
.ÿobj/
√tw‹k
.ÿobj/
sched
.o

4 
gcc
 
obj
/
maö
.
o
 obj/
drivîs
.ÿobj/
fûesy°em
.ÿobj/
√tw‹k
.ÿobj/
sched
.ÿ-ÿ
¢≠


6 
obj
/
maö
.
o
: maö.
c


7 
gcc
 -
c
 
maö
.¯-
o
 
obj
/main.o

9 
obj
/
drivîs
.
o
: drivîs.
c


10 
gcc
 -
c
 
drivîs
.¯-
o
 
obj
/drivers.o

12 
obj
/
fûesy°em
.
o
: fûesy°em.
c
 
sched
.
h


13 
gcc
 -
c
 
fûesy°em
.¯-
o
 
obj
/filesystem.o

15 
obj
/
√tw‹k
.
o
:Çëw‹k.
c
 
sched
.
h


16 
gcc
 -
c
 
√tw‹k
.¯-
o
 
obj
/network.o

18 
obj
/
sched
.
o
: sched.
c


19 
gcc
 -
c
 
sched
.¯-
o
 
obj
/sched.o

21 
˛ón
:

22 
rm
 -
rf
 
obj


	@tests/drivers.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"drivîs.h
"

6 
	$drivîs_öô
() {

7 
a
;

8 
b
;

9 
c
;

10 
c
 = 
a
+
b
;

11 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

12 
	}
}

14 
	$drivîs_run
() {

15 
hñlo
 = 20;

16 
w‹ld
 = 10;

17 
hñlow‹ld
;

18 
hñlow‹ld
 = 
hñlo
 + 
w‹ld
;

19 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

20 
	}
}

22 
	$drivîs_upd©e
() {

23 
i
;

24 
j
;

25 
i
 = 20;

26 
j
 = 30;

27 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

28 
	}
}

	@tests/drivers.h

1 #i‚de‡
DRIVERS_H


2 
	#DRIVERS_H


	)

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

6 
drivîs_öô
();

7 
drivîs_run
();

8 
drivîs_upd©e
();

	@tests/filesystem.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"fûesy°em.h
"

4 
	~"sched.h
"

6 
	$fûesy°em_öô
() {

7 
	`sched_öô
();

8 
a
;

9 
b
;

10 
c
;

11 
c
 = 
a
+
b
;

12 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

13 
	}
}

15 
	$fûesy°em_run
() {

16 
hñlo
 = 20;

17 
w‹ld
 = 10;

18 
hñlow‹ld
;

19 
hñlow‹ld
 = 
hñlo
 + 
w‹ld
;

20 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

21 
	}
}

23 
	$fûesy°em_upd©e
() {

24 
	`sched_upd©e
();

25 
i
;

26 
j
;

27 
i
 = 20;

28 
j
 = 30;

29 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

30 
	}
}

	@tests/filesystem.h

1 #i‚de‡
FILESYSTEM_H


2 
	#FILESYSTEM_H


	)

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

7 
fûesy°em_öô
();

8 
fûesy°em_run
();

9 
fûesy°em_upd©e
();

	@tests/main.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"drivîs.h
"

4 
	~"√tw‹k.h
"

5 
	~"sched.h
"

6 
	~"fûesy°em.h
"

9 
	$maö
() {

10 
	`drivîs_öô
();

11 
	`drivîs_upd©e
();

12 
	`fûesy°em_öô
();

13 
	`fûesy°em_upd©e
();

14 
	`√tw‹k_öô
();

15 
	`√tw‹k_upd©e
();

17 
	}
}

	@tests/network.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"√tw‹k.h
"

4 
	~"sched.h
"

6 
	$√tw‹k_öô
() {

7 
	`sched_öô
();

8 
a
;

9 
b
;

10 
c
;

11 
c
 = 
a
+
b
;

12 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

13 
	}
}

15 
	$√tw‹k_run
() {

16 
hñlo
 = 20;

17 
w‹ld
 = 10;

18 
hñlow‹ld
;

19 
hñlow‹ld
 = 
hñlo
 + 
w‹ld
;

20 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

21 
	}
}

23 
	$√tw‹k_upd©e
() {

24 
	`sched_upd©e
();

25 
i
;

26 
j
;

27 
i
 = 20;

28 
j
 = 30;

29 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

30 
	}
}

	@tests/network.h

1 #i‚de‡
NETWORK_H


2 
	#NETWORK_H


	)

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
√tw‹k_öô
();

7 
√tw‹k_run
();

8 
√tw‹k_upd©e
();

	@tests/sched.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"sched.h
"

5 
	$sched_öô
() {

6 
a
;

7 
b
;

8 
c
;

9 
c
 = 
a
+
b
;

10 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

11 
	}
}

13 
	$sched_run
() {

14 
hñlo
 = 20;

15 
w‹ld
 = 10;

16 
hñlow‹ld
;

17 
hñlow‹ld
 = 
hñlo
 + 
w‹ld
;

18 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

19 
	}
}

21 
	$sched_upd©e
() {

22 
i
;

23 
j
;

24 
i
 = 20;

25 
j
 = 30;

26 
	`¥ötf
("%†%d: %s()\n", 
__FILE__
, 
__LINE__
, 
__FUNCTION__
);

27 
	}
}

	@tests/sched.h

1 #i‚de‡
SCHED_H


2 
	#SCHED_H


	)

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

6 
sched_öô
();

7 
sched_run
();

8 
sched_upd©e
();

	@type.h

1 #i‚de‡
TYPE_H


2 
	#TYPE_H


	)

4 
_Boﬁ
 
	tboﬁ
;

	@
1
.
0
21
251
Makefile
file.c
file.h
main.c
maindefs.c
maindefs.h
md5hash.c
md5hash.h
misc.c
misc.h
tests/Makefile
tests/drivers.c
tests/drivers.h
tests/filesystem.c
tests/filesystem.h
tests/main.c
tests/network.c
tests/network.h
tests/sched.c
tests/sched.h
type.h
